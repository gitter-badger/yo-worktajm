<div ng-include src="'views/partials/navbar.html'" ></div>

<div class="container" ng-show="principal" >

  <!-- Projects -->
  <div class="row">

    <!-- Column 1 -->
    <div class="col-md-2">
    </div>

    <!-- Center column -->
    <div class="col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">Reports</h4>
        </div>
        <div class="panel-body" ng-controller="ReportsCtrl">

          <form class="form-horizontal" role="form" ng-submit="generateReport()">
            <h3>Report Settings</h3>

            <!-- List the available reporting periods -->
            <div class="form-group">
              <label for="period" class="col-sm-2 control-label">Time Period</label>
              <div class="col-sm-10">
                <div class="btn-group">
                  <button ng-repeat="period in timeChoices" 
                          type="button" 
                          class="btn btn-primary" 
                          ng-model="selection.timePeriod" 
                          btn-radio="period.id">
                    {{period.name}}
                  </button>
                </div>
              </div>    
            </div>  

            <!-- List the available report types -->
            <div class="form-group">
              <label for="period" class="col-sm-2 control-label">Report Type</label>
              <div class="col-sm-10">
                <div class="btn-group">
                  <button ng-repeat="type in reportTypes" 
                          type="button" 
                          class="btn btn-primary" 
                          ng-model="selection.reportType" 
                          btn-radio="type.id">
                    {{type.name}}
                  </button>
                </div>
              </div>    
            </div>  

            <!-- List the available customers -->
            <div class="form-group">
              <label for="customer" class="col-sm-2 control-label">Customers</label>
              <div class="col-sm-10">
                <div class="btn-group">
                  <button ng-repeat="customer in customers" 
                          type="button"
                          class="btn btn-primary"
                          ng-model="selection.customer"
                          btn-radio="customer.id"
                          >
                    {{customer.name}}
                  </button>
                </div>
              </div>
            </div>

            <!-- List the available projects, filtered by customer if selected -->
            <div class="form-group">
              <label for="project" class="col-sm-2 control-label">Projects</label>
              <div class="col-sm-10">
                <div class="btn-group">
                  <button ng-repeat="project in filteredProjects = (projects | projectFilter:selection)" 
                          type="button" 
                          class="btn btn-primary" 
                          ng-model="project.enabled" 
                          btn-radio="project.id"
                          btn-checkbox>
                    {{project.name}}
                  </button>
                </div>
              </div>    
            </div>  

            <pre>
              selection: {{selection}}
              enabledCustomers: {{enabledCustomers()}}
              enabledProjects: {{enabledProjects()}}
            </pre>

            <button type="submit" class="btn btn-default">Run Report</button>
          </form>

          <!-- Iterator for time entries -->
          <table  class="table table-condensed table-hover" >
            <thead>
              <tr>
                <th class="col-md-5" >Project</th>
                <th class="col-md-2">Start</th>
                <th class="col-md-2">End</th>
              </tr>
            </thead>
            <tbody ng-repeat="timeEntry in timeEntries">
              <tr>
                <td>
                  Hej
                  {{timeEntry.project.name}}
                </td>
                <td>{{timeEntry.startTime | date: 'HH:mm:ss'}}</td>
                <td>{{getEndTime(timeEntry)}}</td>
              </tr>
            </tbody>
            <tfooter>
              <tr>
                <th class="col-md-5" >Project</th>
                <th class="col-md-2">Start</th>
                <th class="col-md-2">End</th>
              </tr>
            </tfooter>
          </table>


        </div>
    </div>

    <!-- Column 3 -->
    <div class="col-md-2">
    </div>

    </div>
  </div>
</div>